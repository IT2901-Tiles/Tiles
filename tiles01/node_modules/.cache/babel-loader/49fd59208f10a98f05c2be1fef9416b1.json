{"ast":null,"code":"'use strict';\n\nconst MongoNetworkError = require('./core').MongoNetworkError; // From spec@https://github.com/mongodb/specifications/blob/f93d78191f3db2898a59013a7ed5650352ef6da8/source/change-streams/change-streams.rst#resumable-error\n\n\nconst GET_MORE_RESUMABLE_CODES = new Set([6, // HostUnreachable\n7, // HostNotFound\n89, // NetworkTimeout\n91, // ShutdownInProgress\n189, // PrimarySteppedDown\n262, // ExceededTimeLimit\n9001, // SocketException\n10107, // NotMaster\n11600, // InterruptedAtShutdown\n11602, // InterruptedDueToReplStateChange\n13435, // NotMasterNoSlaveOk\n13436, // NotMasterOrSecondary\n63, // StaleShardVersion\n150, // StaleEpoch\n13388, // StaleConfig\n234, // RetryChangeStream\n133, // FailedToSatisfyReadPreference\n43 // CursorNotFound\n]);\n\nfunction isResumableError(error, wireVersion) {\n  if (error instanceof MongoNetworkError) {\n    return true;\n  }\n\n  if (wireVersion >= 9) {\n    // DRIVERS-1308: For 4.4 drivers running against 4.4 servers, drivers will add a special case to treat the CursorNotFound error code as resumable\n    if (error.code === 43) {\n      return true;\n    }\n\n    return error.hasErrorLabel('ResumableChangeStreamError');\n  }\n\n  return GET_MORE_RESUMABLE_CODES.has(error.code);\n}\n\nmodule.exports = {\n  GET_MORE_RESUMABLE_CODES,\n  isResumableError\n};","map":{"version":3,"sources":["C:/Users/StuartGO/projects/bachelorOppgave/Tiles/tiles01/node_modules/mongodb/lib/error.js"],"names":["MongoNetworkError","require","GET_MORE_RESUMABLE_CODES","Set","isResumableError","error","wireVersion","code","hasErrorLabel","has","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,iBAAiB,GAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBD,iBAA5C,C,CAEA;;;AACA,MAAME,wBAAwB,GAAG,IAAIC,GAAJ,CAAQ,CACvC,CADuC,EACpC;AACH,CAFuC,EAEpC;AACH,EAHuC,EAGnC;AACJ,EAJuC,EAInC;AACJ,GALuC,EAKlC;AACL,GANuC,EAMlC;AACL,IAPuC,EAOjC;AACN,KARuC,EAQhC;AACP,KATuC,EAShC;AACP,KAVuC,EAUhC;AACP,KAXuC,EAWhC;AACP,KAZuC,EAYhC;AACP,EAbuC,EAanC;AACJ,GAduC,EAclC;AACL,KAfuC,EAehC;AACP,GAhBuC,EAgBlC;AACL,GAjBuC,EAiBlC;AACL,EAlBuC,CAkBpC;AAlBoC,CAAR,CAAjC;;AAqBA,SAASC,gBAAT,CAA0BC,KAA1B,EAAiCC,WAAjC,EAA8C;AAC5C,MAAID,KAAK,YAAYL,iBAArB,EAAwC;AACtC,WAAO,IAAP;AACD;;AAED,MAAIM,WAAW,IAAI,CAAnB,EAAsB;AACpB;AACA,QAAID,KAAK,CAACE,IAAN,KAAe,EAAnB,EAAuB;AACrB,aAAO,IAAP;AACD;;AACD,WAAOF,KAAK,CAACG,aAAN,CAAoB,4BAApB,CAAP;AACD;;AAED,SAAON,wBAAwB,CAACO,GAAzB,CAA6BJ,KAAK,CAACE,IAAnC,CAAP;AACD;;AAEDG,MAAM,CAACC,OAAP,GAAiB;AAAET,EAAAA,wBAAF;AAA4BE,EAAAA;AAA5B,CAAjB","sourcesContent":["'use strict';\n\nconst MongoNetworkError = require('./core').MongoNetworkError;\n\n// From spec@https://github.com/mongodb/specifications/blob/f93d78191f3db2898a59013a7ed5650352ef6da8/source/change-streams/change-streams.rst#resumable-error\nconst GET_MORE_RESUMABLE_CODES = new Set([\n  6, // HostUnreachable\n  7, // HostNotFound\n  89, // NetworkTimeout\n  91, // ShutdownInProgress\n  189, // PrimarySteppedDown\n  262, // ExceededTimeLimit\n  9001, // SocketException\n  10107, // NotMaster\n  11600, // InterruptedAtShutdown\n  11602, // InterruptedDueToReplStateChange\n  13435, // NotMasterNoSlaveOk\n  13436, // NotMasterOrSecondary\n  63, // StaleShardVersion\n  150, // StaleEpoch\n  13388, // StaleConfig\n  234, // RetryChangeStream\n  133, // FailedToSatisfyReadPreference\n  43 // CursorNotFound\n]);\n\nfunction isResumableError(error, wireVersion) {\n  if (error instanceof MongoNetworkError) {\n    return true;\n  }\n\n  if (wireVersion >= 9) {\n    // DRIVERS-1308: For 4.4 drivers running against 4.4 servers, drivers will add a special case to treat the CursorNotFound error code as resumable\n    if (error.code === 43) {\n      return true;\n    }\n    return error.hasErrorLabel('ResumableChangeStreamError');\n  }\n\n  return GET_MORE_RESUMABLE_CODES.has(error.code);\n}\n\nmodule.exports = { GET_MORE_RESUMABLE_CODES, isResumableError };\n"]},"metadata":{},"sourceType":"script"}