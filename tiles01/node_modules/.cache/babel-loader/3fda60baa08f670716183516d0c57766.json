{"ast":null,"code":"'use strict';\n\nconst OperationBase = require('./operation').OperationBase;\n\nconst removeDocuments = require('./common_functions').removeDocuments;\n\nconst Aspect = require('./operation').Aspect;\n\nconst defineAspects = require('./operation').defineAspects;\n\nclass DeleteOneOperation extends OperationBase {\n  constructor(collection, filter, options) {\n    super(options);\n    this.collection = collection;\n    this.filter = filter;\n  }\n\n  execute(callback) {\n    const coll = this.collection;\n    const filter = this.filter;\n    const options = this.options;\n    options.single = true;\n    removeDocuments(coll, filter, options, (err, r) => {\n      if (callback == null) return;\n      if (err && callback) return callback(err);\n      if (r == null) return callback(null, {\n        result: {\n          ok: 1\n        }\n      }); // If an explain operation was executed, don't process the server results\n\n      if (this.explain) return callback(undefined, r.result);\n      r.deletedCount = r.result.n;\n      callback(null, r);\n    });\n  }\n\n}\n\ndefineAspects(DeleteOneOperation, [Aspect.EXPLAINABLE]);\nmodule.exports = DeleteOneOperation;","map":{"version":3,"sources":["C:/Users/StuartGO/projects/bachelorOppgave/Tiles/tiles01/node_modules/mongodb/lib/operations/delete_one.js"],"names":["OperationBase","require","removeDocuments","Aspect","defineAspects","DeleteOneOperation","constructor","collection","filter","options","execute","callback","coll","single","err","r","result","ok","explain","undefined","deletedCount","n","EXPLAINABLE","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,aAAa,GAAGC,OAAO,CAAC,aAAD,CAAP,CAAuBD,aAA7C;;AACA,MAAME,eAAe,GAAGD,OAAO,CAAC,oBAAD,CAAP,CAA8BC,eAAtD;;AACA,MAAMC,MAAM,GAAGF,OAAO,CAAC,aAAD,CAAP,CAAuBE,MAAtC;;AACA,MAAMC,aAAa,GAAGH,OAAO,CAAC,aAAD,CAAP,CAAuBG,aAA7C;;AAEA,MAAMC,kBAAN,SAAiCL,aAAjC,CAA+C;AAC7CM,EAAAA,WAAW,CAACC,UAAD,EAAaC,MAAb,EAAqBC,OAArB,EAA8B;AACvC,UAAMA,OAAN;AAEA,SAAKF,UAAL,GAAkBA,UAAlB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACD;;AAEDE,EAAAA,OAAO,CAACC,QAAD,EAAW;AAChB,UAAMC,IAAI,GAAG,KAAKL,UAAlB;AACA,UAAMC,MAAM,GAAG,KAAKA,MAApB;AACA,UAAMC,OAAO,GAAG,KAAKA,OAArB;AAEAA,IAAAA,OAAO,CAACI,MAAR,GAAiB,IAAjB;AACAX,IAAAA,eAAe,CAACU,IAAD,EAAOJ,MAAP,EAAeC,OAAf,EAAwB,CAACK,GAAD,EAAMC,CAAN,KAAY;AACjD,UAAIJ,QAAQ,IAAI,IAAhB,EAAsB;AACtB,UAAIG,GAAG,IAAIH,QAAX,EAAqB,OAAOA,QAAQ,CAACG,GAAD,CAAf;AACrB,UAAIC,CAAC,IAAI,IAAT,EAAe,OAAOJ,QAAQ,CAAC,IAAD,EAAO;AAAEK,QAAAA,MAAM,EAAE;AAAEC,UAAAA,EAAE,EAAE;AAAN;AAAV,OAAP,CAAf,CAHkC,CAKjD;;AACA,UAAI,KAAKC,OAAT,EAAkB,OAAOP,QAAQ,CAACQ,SAAD,EAAYJ,CAAC,CAACC,MAAd,CAAf;AAElBD,MAAAA,CAAC,CAACK,YAAF,GAAiBL,CAAC,CAACC,MAAF,CAASK,CAA1B;AACAV,MAAAA,QAAQ,CAAC,IAAD,EAAOI,CAAP,CAAR;AACD,KAVc,CAAf;AAWD;;AAzB4C;;AA4B/CX,aAAa,CAACC,kBAAD,EAAqB,CAACF,MAAM,CAACmB,WAAR,CAArB,CAAb;AAEAC,MAAM,CAACC,OAAP,GAAiBnB,kBAAjB","sourcesContent":["'use strict';\n\nconst OperationBase = require('./operation').OperationBase;\nconst removeDocuments = require('./common_functions').removeDocuments;\nconst Aspect = require('./operation').Aspect;\nconst defineAspects = require('./operation').defineAspects;\n\nclass DeleteOneOperation extends OperationBase {\n  constructor(collection, filter, options) {\n    super(options);\n\n    this.collection = collection;\n    this.filter = filter;\n  }\n\n  execute(callback) {\n    const coll = this.collection;\n    const filter = this.filter;\n    const options = this.options;\n\n    options.single = true;\n    removeDocuments(coll, filter, options, (err, r) => {\n      if (callback == null) return;\n      if (err && callback) return callback(err);\n      if (r == null) return callback(null, { result: { ok: 1 } });\n\n      // If an explain operation was executed, don't process the server results\n      if (this.explain) return callback(undefined, r.result);\n\n      r.deletedCount = r.result.n;\n      callback(null, r);\n    });\n  }\n}\n\ndefineAspects(DeleteOneOperation, [Aspect.EXPLAINABLE]);\n\nmodule.exports = DeleteOneOperation;\n"]},"metadata":{},"sourceType":"script"}