{"ast":null,"code":"'use strict';\n\nconst parseServerType = require('../core/sdam/server_description').parseServerType;\n\nconst RESPONSE_FIELDS = ['minWireVersion', 'maxWireVersion', 'maxBsonObjectSize', 'maxMessageSizeBytes', 'maxWriteBatchSize', '__nodejs_mock_server__'];\n\nclass StreamDescription {\n  constructor(address, options) {\n    this.address = address;\n    this.type = parseServerType(null);\n    this.minWireVersion = undefined;\n    this.maxWireVersion = undefined;\n    this.maxBsonObjectSize = 16777216;\n    this.maxMessageSizeBytes = 48000000;\n    this.maxWriteBatchSize = 100000;\n    this.compressors = options && options.compression && Array.isArray(options.compression.compressors) ? options.compression.compressors : [];\n  }\n\n  receiveResponse(response) {\n    this.type = parseServerType(response);\n    RESPONSE_FIELDS.forEach(field => {\n      if (typeof response[field] !== 'undefined') {\n        this[field] = response[field];\n      }\n    });\n\n    if (response.compression) {\n      this.compressor = this.compressors.filter(c => response.compression.indexOf(c) !== -1)[0];\n    }\n  }\n\n}\n\nmodule.exports = {\n  StreamDescription\n};","map":{"version":3,"sources":["C:/Users/StuartGO/projects/bachelorOppgave/Tiles/tiles01/node_modules/mongodb/lib/cmap/stream_description.js"],"names":["parseServerType","require","RESPONSE_FIELDS","StreamDescription","constructor","address","options","type","minWireVersion","undefined","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","compressors","compression","Array","isArray","receiveResponse","response","forEach","field","compressor","filter","c","indexOf","module","exports"],"mappings":"AAAA;;AACA,MAAMA,eAAe,GAAGC,OAAO,CAAC,iCAAD,CAAP,CAA2CD,eAAnE;;AAEA,MAAME,eAAe,GAAG,CACtB,gBADsB,EAEtB,gBAFsB,EAGtB,mBAHsB,EAItB,qBAJsB,EAKtB,mBALsB,EAMtB,wBANsB,CAAxB;;AASA,MAAMC,iBAAN,CAAwB;AACtBC,EAAAA,WAAW,CAACC,OAAD,EAAUC,OAAV,EAAmB;AAC5B,SAAKD,OAAL,GAAeA,OAAf;AACA,SAAKE,IAAL,GAAYP,eAAe,CAAC,IAAD,CAA3B;AACA,SAAKQ,cAAL,GAAsBC,SAAtB;AACA,SAAKC,cAAL,GAAsBD,SAAtB;AACA,SAAKE,iBAAL,GAAyB,QAAzB;AACA,SAAKC,mBAAL,GAA2B,QAA3B;AACA,SAAKC,iBAAL,GAAyB,MAAzB;AACA,SAAKC,WAAL,GACER,OAAO,IAAIA,OAAO,CAACS,WAAnB,IAAkCC,KAAK,CAACC,OAAN,CAAcX,OAAO,CAACS,WAAR,CAAoBD,WAAlC,CAAlC,GACIR,OAAO,CAACS,WAAR,CAAoBD,WADxB,GAEI,EAHN;AAID;;AAEDI,EAAAA,eAAe,CAACC,QAAD,EAAW;AACxB,SAAKZ,IAAL,GAAYP,eAAe,CAACmB,QAAD,CAA3B;AAEAjB,IAAAA,eAAe,CAACkB,OAAhB,CAAwBC,KAAK,IAAI;AAC/B,UAAI,OAAOF,QAAQ,CAACE,KAAD,CAAf,KAA2B,WAA/B,EAA4C;AAC1C,aAAKA,KAAL,IAAcF,QAAQ,CAACE,KAAD,CAAtB;AACD;AACF,KAJD;;AAMA,QAAIF,QAAQ,CAACJ,WAAb,EAA0B;AACxB,WAAKO,UAAL,GAAkB,KAAKR,WAAL,CAAiBS,MAAjB,CAAwBC,CAAC,IAAIL,QAAQ,CAACJ,WAAT,CAAqBU,OAArB,CAA6BD,CAA7B,MAAoC,CAAC,CAAlE,EAAqE,CAArE,CAAlB;AACD;AACF;;AA3BqB;;AA8BxBE,MAAM,CAACC,OAAP,GAAiB;AACfxB,EAAAA;AADe,CAAjB","sourcesContent":["'use strict';\nconst parseServerType = require('../core/sdam/server_description').parseServerType;\n\nconst RESPONSE_FIELDS = [\n  'minWireVersion',\n  'maxWireVersion',\n  'maxBsonObjectSize',\n  'maxMessageSizeBytes',\n  'maxWriteBatchSize',\n  '__nodejs_mock_server__'\n];\n\nclass StreamDescription {\n  constructor(address, options) {\n    this.address = address;\n    this.type = parseServerType(null);\n    this.minWireVersion = undefined;\n    this.maxWireVersion = undefined;\n    this.maxBsonObjectSize = 16777216;\n    this.maxMessageSizeBytes = 48000000;\n    this.maxWriteBatchSize = 100000;\n    this.compressors =\n      options && options.compression && Array.isArray(options.compression.compressors)\n        ? options.compression.compressors\n        : [];\n  }\n\n  receiveResponse(response) {\n    this.type = parseServerType(response);\n\n    RESPONSE_FIELDS.forEach(field => {\n      if (typeof response[field] !== 'undefined') {\n        this[field] = response[field];\n      }\n    });\n\n    if (response.compression) {\n      this.compressor = this.compressors.filter(c => response.compression.indexOf(c) !== -1)[0];\n    }\n  }\n}\n\nmodule.exports = {\n  StreamDescription\n};\n"]},"metadata":{},"sourceType":"script"}