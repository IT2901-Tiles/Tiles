{"ast":null,"code":"'use strict';\n\nconst Aspect = require('./operation').Aspect;\n\nconst defineAspects = require('./operation').defineAspects;\n\nconst CommandOperation = require('./command');\n\nconst applyWriteConcern = require('../utils').applyWriteConcern;\n\nconst handleCallback = require('../utils').handleCallback;\n\nclass DropIndexOperation extends CommandOperation {\n  constructor(collection, indexName, options) {\n    super(collection.s.db, options, collection);\n    this.collection = collection;\n    this.indexName = indexName;\n  }\n\n  _buildCommand() {\n    const collection = this.collection;\n    const indexName = this.indexName;\n    const options = this.options;\n    let cmd = {\n      dropIndexes: collection.collectionName,\n      index: indexName\n    }; // Decorate command with writeConcern if supported\n\n    cmd = applyWriteConcern(cmd, {\n      db: collection.s.db,\n      collection\n    }, options);\n    return cmd;\n  }\n\n  execute(callback) {\n    // Execute command\n    super.execute((err, result) => {\n      if (typeof callback !== 'function') return;\n      if (err) return handleCallback(callback, err, null);\n      handleCallback(callback, null, result);\n    });\n  }\n\n}\n\ndefineAspects(DropIndexOperation, Aspect.WRITE_OPERATION);\nmodule.exports = DropIndexOperation;","map":{"version":3,"sources":["C:/Users/StuartGO/projects/bachelorOppgave/Tiles/tiles01/node_modules/mongodb/lib/operations/drop_index.js"],"names":["Aspect","require","defineAspects","CommandOperation","applyWriteConcern","handleCallback","DropIndexOperation","constructor","collection","indexName","options","s","db","_buildCommand","cmd","dropIndexes","collectionName","index","execute","callback","err","result","WRITE_OPERATION","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,aAAD,CAAP,CAAuBD,MAAtC;;AACA,MAAME,aAAa,GAAGD,OAAO,CAAC,aAAD,CAAP,CAAuBC,aAA7C;;AACA,MAAMC,gBAAgB,GAAGF,OAAO,CAAC,WAAD,CAAhC;;AACA,MAAMG,iBAAiB,GAAGH,OAAO,CAAC,UAAD,CAAP,CAAoBG,iBAA9C;;AACA,MAAMC,cAAc,GAAGJ,OAAO,CAAC,UAAD,CAAP,CAAoBI,cAA3C;;AAEA,MAAMC,kBAAN,SAAiCH,gBAAjC,CAAkD;AAChDI,EAAAA,WAAW,CAACC,UAAD,EAAaC,SAAb,EAAwBC,OAAxB,EAAiC;AAC1C,UAAMF,UAAU,CAACG,CAAX,CAAaC,EAAnB,EAAuBF,OAAvB,EAAgCF,UAAhC;AAEA,SAAKA,UAAL,GAAkBA,UAAlB;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACD;;AAEDI,EAAAA,aAAa,GAAG;AACd,UAAML,UAAU,GAAG,KAAKA,UAAxB;AACA,UAAMC,SAAS,GAAG,KAAKA,SAAvB;AACA,UAAMC,OAAO,GAAG,KAAKA,OAArB;AAEA,QAAII,GAAG,GAAG;AAAEC,MAAAA,WAAW,EAAEP,UAAU,CAACQ,cAA1B;AAA0CC,MAAAA,KAAK,EAAER;AAAjD,KAAV,CALc,CAOd;;AACAK,IAAAA,GAAG,GAAGV,iBAAiB,CAACU,GAAD,EAAM;AAAEF,MAAAA,EAAE,EAAEJ,UAAU,CAACG,CAAX,CAAaC,EAAnB;AAAuBJ,MAAAA;AAAvB,KAAN,EAA2CE,OAA3C,CAAvB;AAEA,WAAOI,GAAP;AACD;;AAEDI,EAAAA,OAAO,CAACC,QAAD,EAAW;AAChB;AACA,UAAMD,OAAN,CAAc,CAACE,GAAD,EAAMC,MAAN,KAAiB;AAC7B,UAAI,OAAOF,QAAP,KAAoB,UAAxB,EAAoC;AACpC,UAAIC,GAAJ,EAAS,OAAOf,cAAc,CAACc,QAAD,EAAWC,GAAX,EAAgB,IAAhB,CAArB;AACTf,MAAAA,cAAc,CAACc,QAAD,EAAW,IAAX,EAAiBE,MAAjB,CAAd;AACD,KAJD;AAKD;;AA5B+C;;AA+BlDnB,aAAa,CAACI,kBAAD,EAAqBN,MAAM,CAACsB,eAA5B,CAAb;AAEAC,MAAM,CAACC,OAAP,GAAiBlB,kBAAjB","sourcesContent":["'use strict';\n\nconst Aspect = require('./operation').Aspect;\nconst defineAspects = require('./operation').defineAspects;\nconst CommandOperation = require('./command');\nconst applyWriteConcern = require('../utils').applyWriteConcern;\nconst handleCallback = require('../utils').handleCallback;\n\nclass DropIndexOperation extends CommandOperation {\n  constructor(collection, indexName, options) {\n    super(collection.s.db, options, collection);\n\n    this.collection = collection;\n    this.indexName = indexName;\n  }\n\n  _buildCommand() {\n    const collection = this.collection;\n    const indexName = this.indexName;\n    const options = this.options;\n\n    let cmd = { dropIndexes: collection.collectionName, index: indexName };\n\n    // Decorate command with writeConcern if supported\n    cmd = applyWriteConcern(cmd, { db: collection.s.db, collection }, options);\n\n    return cmd;\n  }\n\n  execute(callback) {\n    // Execute command\n    super.execute((err, result) => {\n      if (typeof callback !== 'function') return;\n      if (err) return handleCallback(callback, err, null);\n      handleCallback(callback, null, result);\n    });\n  }\n}\n\ndefineAspects(DropIndexOperation, Aspect.WRITE_OPERATION);\n\nmodule.exports = DropIndexOperation;\n"]},"metadata":{},"sourceType":"script"}